## Описание БД MySQL приложения Diaspora

Распределенная социальная сеть [Diaspora](https://diasporafoundation.org/) состоит из отдельных серверов-узлов (Pods в терминологии Diaspora), связанных между собой, и пользователей, которые могут выбрать тот или иной сервер для регистрации и хранения своих данных. Пользователи одного публичного сервера могут видеть посты и общаться с пользователями другого публичного сервера. Каждый сервер имеет собственную БД, в которой хранит данные пользователей и другую связанную информацию. 

В данном проекте выполнен анализ БД MySQL одного сервера (Pod) Diaspora. Для этого сервер был развернут локально (но без доступности извне). Было создано несколько тестовых пользователей и выполнен некоторый стандартный набор действий от их имени (регистрация, публикация постов, комментариев, отправка личных сообщений, добавление в группу и т.д.)

Серверная часть Diaspora написана на Rails. Этот фреймворк взаимодействует с БД посредством ORM, который (в данном случае) делает много простых (и по отдельности эффективных) запросов к БД, результаты которых затем обрабатываются сервером приложения. Т.о. большая часть бизнес-логики перенесена из СУБД на сервер приложения. Это означает также, что мы не увидим тут длинных и сложных запросов с вложенными подзапросами.  


В типовой БД MySQL Diaspora отсутствуют Views, Triggers и Stored procedures. 


### Назначение некоторых таблиц БД

(информация об API Diaspora доступна [по ссылке](https://diaspora.github.io/api-documentation/index.html))

1. 'account_deletions' - хранит краткие сведения об удаленных пользователях.
2. 'ar_internal_metadata' - хранит режим эксплуатации сервера - production/development
3. 'aspect_memberships' - данные о членстве пользователей в Аспектах (аналог групп в FB)
4. 'aspects' - список Аспектов (групп) на сервере
5. 'comments' - комментарии пользователей к постам (Статусам в терминологии Diaspora)
6. 'contacts' - информация о связанности пользователей друг с другом (аналог дружбы в FB)
7. 'conversations' - переписка пользователей внутри соц.сети
8. 'likes' - информация о том, кто что "лайкнул"
9. 'mentions' - ссылки на пользователей в тексте постов, комментариях и т.п. (ссылка выглядит как "@имя пользователя")
10. 'messages' - отдельные сообщения пользователей в личной переписке.
11. 'notifications' - информация об уведомлениях пользователей (отправитель/получатель/причина уведомления)
12. 'participations' - авторство постов
13. 'people' - люди, регистрировавшиеся в системе (e-mail, Pod на котором регистрировался, дата регистрации)
14. 'photos' - ссылки на изображения (сами картинки в БД не хранятся)
15. 'pods' - таблица серверов (Pods)
16. 'poll_answers' - ответы на вопросы опросников (опросы можно публиковать на своей страничке)
17. 'poll_participations' - участники опросов и ссылки на ответы
18. 'polls' - опубликованные опросы
19. 'posts' - хранилище постов (статусов)
20. 'profiles' - профили пользователей
21. 'reports' - жалобы пользователей на оскорбительные посты
22. 'tags' - список тегов, созданных пользователями
23. 'users' - пользователи системы.
